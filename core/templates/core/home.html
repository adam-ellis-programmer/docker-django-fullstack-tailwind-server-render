{% extends 'base.html' %}
<!--  -->
{% block title %}Home - Social Feed{% endblock %}
<!--  -->
{% block content %}
<div
  class="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50"
>
  <!-- Hero Section -->
  <div class="relative overflow-hidden">
    <div class="max-w-7xl mx-auto">
      <div
        class="relative z-10 pb-8 bg-transparent sm:pb-16 md:pb-20 lg:pb-28 xl:pb-32"
      >
        <main
          class="mt-10 mx-auto max-w-7xl px-4 sm:mt-12 sm:px-6 md:mt-16 lg:mt-20 lg:px-8 xl:mt-28"
        >
          <div class="text-center lg:text-left">
            <div class="sm:text-center lg:text-left">
              <h1
                class="text-4xl tracking-tight font-extrabold text-gray-900 sm:text-5xl md:text-6xl"
              >
                <span class="block">Welcome to</span>
                <span
                  class="block bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent"
                >
                  Travel Social
                </span>
              </h1>
              <p
                class="mt-3 text-base text-gray-500 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0"
              >
                Connect with friends, share your thoughts, and discover amazing
                content from people around the world. Join our community today
                and start your social journey.
              </p>

              <!-- CTA Buttons -->
              <div
                class="mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start"
              >
                <div class="rounded-md shadow">
                  <a
                    href="{% url 'accounts:signup_page' %}"
                    class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 md:py-4 md:text-lg md:px-10 transition-colors shadow-lg hover:shadow-xl"
                  >
                    Get Started
                  </a>
                </div>
                <div class="mt-3 sm:mt-0 sm:ml-3">
                  <a
                    href="{% url 'accounts:signin_page' %}"
                    class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 md:py-4 md:text-lg md:px-10 transition-colors"
                  >
                    Sign In
                  </a>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <!-- Decorative elements -->
    <div class="absolute top-0 right-0 -mt-4 pr-4 sm:pr-6 lg:pr-8">
      <svg
        class="w-64 h-64 text-indigo-200 opacity-50"
        fill="currentColor"
        viewBox="0 0 20 20"
      >
        <path
          fill-rule="evenodd"
          d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
          clip-rule="evenodd"
        />
      </svg>
    </div>
  </div>

  <!-- Features Section -->
  <div class="py-12 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="lg:text-center">
        <h2
          class="text-base text-indigo-600 font-semibold tracking-wide uppercase"
        >
          Features
        </h2>
        <p
          class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl"
        >
          Everything you need to connect
        </p>
        <p class="mt-4 max-w-2xl text-xl text-gray-500 lg:mx-auto">
          Our platform provides all the tools you need to build meaningful
          connections and share your story.
        </p>
      </div>

      <div class="mt-10">
        <div
          class="space-y-10 md:space-y-0 md:grid md:grid-cols-3 md:gap-x-8 md:gap-y-10"
        >
          <!-- Feature 1 -->
          <div class="relative text-center">
            <div
              class="flex items-center justify-center h-12 w-12 rounded-md bg-indigo-500 text-white mx-auto"
            >
              <svg
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"
                />
              </svg>
            </div>
            <h3 class="mt-4 text-lg font-medium text-gray-900">
              Real-time Chat
            </h3>
            <p class="mt-2 text-base text-gray-500">
              Connect instantly with friends through our real-time messaging
              system.
            </p>
          </div>

          <!-- Feature 2 -->
          <div class="relative text-center">
            <div
              class="flex items-center justify-center h-12 w-12 rounded-md bg-indigo-500 text-white mx-auto"
            >
              <svg
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
                />
              </svg>
            </div>
            <h3 class="mt-4 text-lg font-medium text-gray-900">
              Share Moments
            </h3>
            <p class="mt-2 text-base text-gray-500">
              Share your favorite moments with photos, videos, and stories.
            </p>
          </div>

          <!-- Feature 3 -->
          <div class="relative text-center">
            <div
              class="flex items-center justify-center h-12 w-12 rounded-md bg-indigo-500 text-white mx-auto"
            >
              <svg
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"
                />
              </svg>
            </div>
            <h3 class="mt-4 text-lg font-medium text-gray-900">Find Friends</h3>
            <p class="mt-2 text-base text-gray-500">
              Discover and connect with like-minded people in your area.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Call to Action Section -->
  <div class="bg-indigo-700" id="ctaSection">
    <div
      class="max-w-2xl mx-auto text-center py-16 px-4 sm:py-20 sm:px-6 lg:px-8"
    >
      <!-- Logged out CTA (default) -->
      <div id="loggedOutBottomCTA">
        <h2 class="text-3xl font-extrabold text-white sm:text-4xl">
          <span class="block">Ready to get started?</span>
          <span class="block">Join thousands of users today.</span>
        </h2>
        <p class="mt-4 text-lg leading-6 text-indigo-200">
          Create your account in seconds and start connecting with people who
          matter to you.
        </p>
        <div class="mt-8 flex justify-center space-x-4">
          <a
            href="{% url 'accounts:signup_page' %}"
            class="inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-indigo-600 bg-white hover:bg-indigo-50 transition-colors"
          >
            Sign up for free
          </a>
          <a
            href="{% url 'core:about' %}"
            class="inline-flex items-center justify-center px-5 py-3 border border-white text-base font-medium rounded-md text-white hover:bg-indigo-600 transition-colors"
          >
            Learn more
          </a>
        </div>
      </div>

      <!-- Logged in CTA (hidden by default) -->
      <div id="loggedInBottomCTA" class="hidden">
        <h2 class="text-3xl font-extrabold text-white sm:text-4xl">
          <span class="block">Welcome back!</span>
          <span class="block">Ready to continue your journey?</span>
        </h2>
        <p class="mt-4 text-lg leading-6 text-indigo-200">
          Explore your profile, connect with friends, and discover amazing
          content.
        </p>
        <div class="mt-8 flex justify-center space-x-4">
          <a
            href="{% url 'accounts:profile_page' %}"
            class="inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-indigo-600 bg-white hover:bg-indigo-50 transition-colors"
          >
            Go to Profile
          </a>
          <a
            href="{% url 'core:about' %}"
            class="inline-flex items-center justify-center px-5 py-3 border border-white text-base font-medium rounded-md text-white hover:bg-indigo-600 transition-colors"
          >
            Learn more
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Update home page content based on auth state
  function updateHomePageForAuthState() {
    if (currentUser) {
      // Option A: Immediate redirect
      window.location.href = '{% url "accounts:profile_page" %}'

      // Option B: Show logged-in content (current behavior)
      // document.getElementById('loggedOutCTA').classList.add('hidden');
      // document.getElementById('loggedInCTA').classList.remove('hidden');
      // document.getElementById('loggedOutBottomCTA').classList.add('hidden');
      // document.getElementById('loggedInBottomCTA').classList.remove('hidden');
    } else {
      // Show logged out content (default)
      document.getElementById('loggedOutCTA').classList.remove('hidden')
      document.getElementById('loggedInCTA').classList.add('hidden')
      document.getElementById('loggedOutBottomCTA').classList.remove('hidden')
      document.getElementById('loggedInBottomCTA').classList.add('hidden')
    }
  }

  // In home.html - Listen for auth state changes
  document.addEventListener('authStateChanged', function (event) {
    const { authenticated, user } = event.detail
    updateHomePageForAuthState(authenticated, user)
  })

  function updateHomePageForAuthState(authenticated, user) {
    if (authenticated) {
      // Redirect or update content
      window.location.href = '/accounts/profile/'
    } else {
      // Show logged out content
      showLoggedOutContent()
    }
  }
</script>
{% endblock %}
