<!-- Posts Feed Component with Infinite Scroll -->
<div
  class="lg:col-span-2"
  data-infinite-scroll="true"
  data-next-page="{{ next_page_number|default:'null' }}"
  data-has-next="{{ has_next|yesno:'true,false' }}"
  data-endpoint="{% url 'feed:load_more_posts' %}"
>
  <!-- Posts Container -->
  <div id="posts-container" class="space-y-6">
    {% include 'components/posts_list.html' with items=items %}
  </div>

  <!-- Infinite Scroll Elements -->
  <!-- Loading Indicator -->
  <div id="loading-indicator" class="text-center py-8 hidden">
    <div class="inline-flex items-center space-x-2">
      <div
        class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"
      ></div>
      <span class="text-gray-600">Loading more posts...</span>
    </div>
  </div>

  <!-- Scroll Trigger (invisible element that triggers loading) -->
  <div id="scroll-trigger" class="h-10 w-full border border-rose-500"></div>

  <!-- End of Posts Message -->
  <div id="end-of-posts" class="text-center py-8 hidden">
    <div class="text-gray-500">
      <svg
        class="w-12 h-12 mx-auto mb-4 text-gray-300"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
        ></path>
      </svg>
      <p class="text-lg font-medium text-gray-600">You've reached the end!</p>
      <p class="text-sm text-gray-500 mt-1">No more posts to load</p>
    </div>
  </div>

  <!-- Fallback Load More Button (for browsers without Intersection Observer) -->
  <div id="load-more-button" class="text-center mt-8" style="display: none">
    <button
      onclick="loadMorePosts()"
      class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-lg transition-colors duration-200"
    >
      Load More Posts
    </button>
  </div>
</div>
